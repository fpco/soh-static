<!DOCTYPE html>
<html><head><title>PureScript client-side MVC frameworks - School of Haskell | School of Haskell</title><meta http-equiv="x-ua-compatible" content="IE=9"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="google-site-verification" content="Rfxk2TdeMMXEXHgJ2_OO8Rt3hPbQSDao0OXQV_n6z_s" /><link href="//fonts.googleapis.com/css?family=Merriweather" rel="stylesheet" type="text/css"><link href="https://www.schoolofhaskell.com/recent-content/feed" type="application/rss+xml" rel="alternate" title="Recently published content">
<link rel="stylesheet" href="https://www.schoolofhaskell.com/static/combined/UlwEHVcM.css"><style>.social{margin-right:1em}h1{font-family:Merriweather !important}article{font-family:Merriweather !important}article li{font-family:Merriweather !important;line-height:1.6em}h1,h2,h3,h4,h4,h5{font-family:Merriweather !important}.editor p{font-family:Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif}.article-footer{border-top:1px solid #ddd;padding-top:1em;margin-top:1em}body{font-size:16px !important}.navbar .navbar-inner{background:#3c3f41}.navbar .brand{font-size:14px}.navbar .brand img{width:6em}.navbar .icon-wrench{margin:0 -0.5em 0 -0.5em;padding:0 1em 0 1em;height:20px}.navbar-inverse .nav .active a{background:#333638}.navbar-inverse .nav > li > a{color:#a7a7a7
}.navbar-inverse .btn-navbar{background:#333638}.navbar-inverse .nav > li a:hover,.navbar-inverse .btn{background:#333537 !important}@media (max-width: 979px) {.icon-wrench{padding-left:1em !important}}.breadcrumb{border-top-left-radius:0;border-top-right-radius:0}h1{margin-top:20px}.breadcrumb-container + .main-content h1{margin-top:0}.footer{padding:30px 0;margin-top:70px;border-top:1px solid #e5e5e5;background-color:#f5f5f5}.footer ul.footer-menu{list-style-type:none}.footer ul.footer-menu li{display:inline-block}.footer ul.footer-menu li + li{margin-left:0.5em}.footer ul.footer-menu li + li:before{margin-right:0.5em;content:"Â·";color:#999}.footer ul.menu li{display:inline-block}.footer ul.menu li + li{margin-left:0.5em}.footer .copyright{margin-left:25px}.main-content{min-height:100%}.gravatar{width:80px;height:80px;border-radius:2px;background:#eee}.empty-gravatar{width:0}.container{font-family:"Segoe UI", Candara, "Bitstream Vera Sans", "DejaVu Sans", "Bitstream Vera Sans", "Trebuchet MS", Verdana, "Verdana Ref", sans-serif}.container h1,.container h2,.container h4,.container h4,.container h5{font-family:"Segoe UI", Candara, "Bitstream Vera Sans", "DejaVu Sans", "Bitstream Vera Sans", "Trebuchet MS", Verdana, "Verdana Ref", sans-serif}article{font-family:Merriweather !important}article h1{font-family:Merriweather !important}article li{font-family:Merriweather !important;line-height:1.6em}article li + li{margin-top:0.5em}article div.code{background:#f9f9f9;border:1px solid #d1d1d1;position:relative;border-radius:0.2em;margin:0.25em 0 0.75em 0;min-height:2.5em}article code{color:#005580;font-size:14px;white-space:pre}article a.hoogle > code{color:#0088cc;font-size:14px;white-space:pre;border:0}article .expand-code{display:none}article pre{overflow:auto;word-wrap:normal}article code.active{display:block;max-height:430px}article h1{font-size:31.5px}article h3{font-size:17.5px}article h4{font-size:14px}article h5,article h6{font-size:11.9px}article p{line-height:1.7em}article h1 code,article h2 code,article h3 code,article h4 code,article h5 code,article h6 code{font-size:inherit !important}article h1 a,article h2 a,article h3 a,article h4 a,article h5 a,article h6 a{color:#444}article h1 a:before,article h2 a:before,article h3 a:before,article h4 a:before,article h5 a:before,article h6 a:before{margin-left:-1.5em;padding-right:0.5em;font-family:fontawesome;content:"\f0c1";font-size:20px;color:#fff}article h1 a:hover,article h2 a:hover,article h3 a:hover,article h4 a:hover,article h5 a:hover,article h6 a:hover{text-decoration:none;color:#0088cc}article h1 a:hover:before,article h2 a:hover:before,article h3 a:hover:before,article h4 a:hover:before,article h5 a:hover:before,article h6 a:hover:before{color:#888}article h2{font-size:24.5px}article .popover{font-family:actor}article .popover h3.popover-title{font-family:actor !important;font-size:1em}article .popover .popover-content{width:15em;font-size:1em}article .controlsRun{display:block;padding:0.5em;text-align:right;background:#f2f2f2}article .controlsRun a.clone{margin-right:1em;font-family:actor;text-decoration:none}article .controlsRun a.clone span{padding-left:0.5em}article .controlsRun a.run,article .controlsRun a.reset,article .controlsRun a.show-code{font-size:16px}article .controlsRun a.run span,article .controlsRun a.reset span,article .controlsRun a.show-code span{display:none}article .controlsRun a.reset{margin-left:0.5em;color:#a2becc}article .controlsRun a.reset{display:none}article .controlsRun a.show-code{margin-right:0.75em}article .controlsRun a.run:hover,article .controlsRun a.show-code:hover{text-decoration:none}article .controlsRun a.show-code.active{color:#DC0D0D}article .controlsRun a[disabled]{color:#a2becc;cursor:default}article .collapse-area .collapse-header{background:#0088cc;color:#fff;padding:0.3em;cursor:pointer}article .collapse-area .hidden-toggle:before{content:"\f0d7";font-family:fontawesome;margin-right:0.5em;margin-left:0.25em}article .collapse-area .collapsed-files{overflow:auto;height:auto}article .collapse-area.collapse-disabled{display:none}article .collapse-area.collapse-area-off .collapsed-files{height:0px;overflow:hidden}article .collapse-area.collapse-area-off .hidden-toggle:before{content:"\f0da"}article .snippet-stdio .stdout{margin:0.5em;padding-right:2em;position:relative;word-wrap:break-word}article .snippet-stdio .stdin{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none;padding:0;margin:0}article .hoogle-results{margin:0.25em}article .hoogle-results .hoogle-inner{background:#fff;padding:0.5em;border-radius:3px;border:1px solid #ddd}article .hoogle-results .hoogle-inner .close-link{position:relative;float:right;margin-top:-0.5em;margin-right:-0.5em}article .snippet-output-errors{margin:1em 0.5em 0.5em 0.5em;position:relative}article .snippet-output-errors ul{list-style-type:none;margin:0;position:relative}article .snippet-output-errors pre{border:0;border-radius:0;padding:0.25em;margin:0;background:inherit;color:inherit}article .snippet-output-errors .close-link{color:inherit;background:inherit}article .snippet-editors{z-index:0;padding:0.25em}article .close-link{padding:0.5em;background:#eaeaea;border-bottom-left-radius:0.2em;border-top-right-radius:0.2em;position:absolute;top:0;right:0}article .close-link:hover{text-decoration:none}article .snippet-title{padding:0.5em 0 0 0.5em}article .snippet-title .snippet-icon{font-family:FontAwesome;display:inline-block;margin-right:0.5em}article .fullModuleCode + div .snippet-title{margin-top:0.5em;border-top:1px solid #ccc;padding-top:0.5em}article .CodeMirror{height:auto;min-height:1em;line-height:1.5em;background:transparent;font-size:14px !important}article .CodeMirror .highlighted{background:rgba(250, 210, 0, 0.45) !important}article .CodeMirror-widget{margin-left:2em;line-height:1.8}article .CodeMirror.collapsed{height:10em !important}article .editor .expander{text-align:center;display:block;padding:0.5em;text-decoration:none;border-bottom-left-radius:2px;border-bottom-right-radius:2px}article .editor .expander .ellipsis{background:white;border:1px solid #ccc;padding:0 0.5em;height:1em;line-height:0.5em;display:inline-block;color:#555;cursor:pointer}article .editor .expander .ellipsis:hover{background:#ddd;color:#333}article .web-runner{margin:0.5em;padding:0.5em;border:1px solid #ccc;border-radius:3px;background:#f5f5f5}article .web-runner iframe{border:0;margin-top:0.5em;margin-bottom:0;background:white}article .web-runner .controls i{cursor:pointer;color:#0088cc}article .web-runner .controls i:hover{color:#222}article .web-runner .controls i + i{margin-left:0.5em}article .web-runner .controls .icon-remove{float:right}article .hidden{display:block;visibility:visible}article .controlsShowHide{margin-bottom:0.5em}.tutorial-body{float:left !important}.tutorial-nav{float:right !important}@media (max-width: 979px) {.related-content{float:right}.author-name{display:block;margin-left:20px !important;padding-left:5px;margin-top:5px}article h1 a:hover:before,article h2 a:hover:before,article h3 a:hover:before,article h4 a:hover:before,article h5 a:hover:before,article h6 a:hover:before{color:#fff}.tutorial-nav{float:none !important;width:auto !important}.tutorial-body{float:none !important;width:auto !important}}@media (min-width: 980px) and (max-width: 1199px) {.navbar-search{display:none}.tutorial-nav{width:200px}.tutorial-body{width:720px}}#accountPage h1{margin:20px 0 0 0}#accountPage h2{font-size:20px}.group-contents .span8{float:left}.group-contents .span4{float:right}.container > .alert-block{margin-top:1em}.alert{color:#aa874a
}.social{margin-bottom:.8em;display:block}.social a{text-decoration:none}.social i{font-size:1.1em;color:#fff;padding:0.25em;border-radius:0.25em;width:1em;display:inline-block;text-align:center}.social i.icon-twitter{background:#0088cc}.social i.icon-facebook{background:#3b5998
  }.social i.icon-google-plus{background:#dd4b39
  }.well pre{background:#fcfcfc}.well h2{margin-top:0}code{color:#005580;font-size:14px;white-space:pre}</style><!--[if lt IE 8]><link rel="stylesheet" href="https://www.schoolofhaskell.com/static/design/css/ie7.css?etag=TSMl9x1V"><![endif]--><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--></head><body class="not-logged-in" itemscope itemtype="http://schema.org/Product"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-H62P" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-H62P');</script><div class="navbar navbar-inverse navbar-static-top"><div class="navbar-inner"><div class="container"><a class="btn btn-navbar" type="button" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</a>
<a class="brand" href="/"><img src="/static/img/haskell-logo-wide.png" title="School of Haskell">
</a>
<div class="nav-collapse collapse"><ul class="nav"><li><a href="https://www.schoolofhaskell.com/">School</a>
</li>
<li><a href="https://www.schoolofhaskell.com/user">Users</a>
</li>
</ul>
<form class="navbar-search pull-left" action="https://www.schoolofhaskell.com/search"><input class="search-query" type="text" placeholder="Search" name="search">
</form>
</div>
</div>
</div>
</div>
<div class="container breadcrumb-container"><div class="row"><div class="span12"><ul class="breadcrumb"><li><a href="https://www.schoolofhaskell.com/user/griba">Gabriel Riba Faura</a>
<span class="divider">/</span>
</li>
<li><a href="https://www.schoolofhaskell.com/user/griba/purescript-client-side-mvc-frameworks-1">PureScript client-side MVC frameworks</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container main-content"><div class="row"><div class="span12"><h1 itemprop="name">PureScript client-side MVC frameworks</h1>
</div>
</div>
<div class="row"><div class="span7 meta"><p><span class="date"> 9 Jan 2020</span>
<span class="author"><a href="https://www.schoolofhaskell.com/user/griba">Gabriel Riba Faura</a>
</span>
<span class="view-edit-link pull-right"><a class="view-source-link" href="https://www.schoolofhaskell.com/tutorial-raw/4225/8b7a71bddbf6e1664d6a009aca82e2173b338bed">View Markdown source</a>
</span>
</p>
<p class="tags"></p>
</div>
</div>
<div class="row"><div class="span7 meta"><span class="sociallinksunicode social">
<a href="https://twitter.com/home?status=$url$" target="_blank"><i class="icon-twitter"></i></a>&nbsp;
<a href="http://www.facebook.com/sharer/sharer.php?u=$url$" target="_blank"><i class="icon-facebook"></i></a>&nbsp;
<a href="https://plus.google.com/share?url=$url$" target="_blank"><i class="icon-google-plus"></i></a></span>
</div>
</div>
<p class="alert">As of March 2020, School of Haskell has been switched to read-only mode.</p>
<div class="row" itemprop="desc"><div class="span4 tutorial-nav"><div class="related-content"><ul class="nav nav-tabs nav-stacked"><li><script>reddit_target='fpcomplete'</script>
<script src="https://redditstatic.s3.amazonaws.com/button/button1.js"></script>
</li>
<li><a href="https://www.schoolofhaskell.com/user/griba/completing_a_comonad_example">Previous content: Completing a Comonad example</a>
</li>
<li><a href="https://www.schoolofhaskell.com/user/griba/elm-from-a-haskell-perspective">Next content: Elm from a Haskell perspective</a>
</li>
<li><a href="https://www.schoolofhaskell.com/user/griba">See all content by Gabriel Riba Faura</a>
</li>
</ul>

</div>
<div class="aside"><h3>Sections</h3>
<ul><li><a href="#purescript-as-a-full-language-replacement-for-elm">PureScript as a full language replacement for Elm</a><ul><li><a href="#purescript-pux">PureScript Pux</a></li><li><a href="#purescript-thermite">PureScript Thermite</a></li><li><a href="#purescript-halogen">PureScript Halogen</a></li></ul></li></ul></div>
</div>
<div class="span8 tutorial-body" data-environment="def">
<article><h1 id="purescript-as-a-full-language-replacement-for-elm"><a href="#purescript-as-a-full-language-replacement-for-elm">PureScript as a full language replacement for Elm</a></h1><p><a href="http://elm-lang.org">Elm</a> is a client side functional programming framework that has made a trend in Web client frameworks. With the aim of making things easier <a href="http://elm-lang.org/blog/farewell-to-frp">it has dropped a nice functional reactive programming model</a> and has adopted a Model-View-Controller architecture as the functional blocks that the <a href="https://reactjs.org/tutorial/tutorial.html#what-is-react">object-oriented <i>reactJS</i></a> system offers. But its language has no polymorphism for containers <code>(* -&gt; *)</code>, and one for simple types called &quot;type categories&quot; which values <i>(number, comparable, appendable)</i> are hardwired in the compiler, making it a rather limited subset of what the language it is inspired in (Haskell) offers.</p><p>See <a href="https://www.schoolofhaskell.com/user/griba/elm-from-a-haskell-perspective">Elm from a Haskell perspective</a>.</p><p><a href="http://taylor.fausak.me/static/pages/2015-10-22-better-know-a-language-purescript.html#1">PureScript</a> offers alternatives for designing Web User Interfaces much nearer to the language power of Haskell and much lighter weight than GHCJS (no GHC RTS emulation).</p><p>See also <a href="https://www.schoolofhaskell.com/user/griba/lazy_lists_on_strict_purescript">PureScript introduction and recursively defined lazy lists</a>.</p><h2 id="purescript-pux"><a href="#purescript-pux">PureScript Pux</a></h2><ul><li><p><a href="http://purescript-pux.org/">Pux</a> is the PureScript simpler framework, similar to Elm except for effects. Subscriptions use an <a href="http://elm-lang.org/blog/farewell-to-frp">Elm's old FRP</a> Signal <a href="http://purescript-pux.org/docs/rendering/">analog</a>. It uses the <a href="https://pursuit.purescript.org/packages/purescript-smolder">smolder pkg</a> for describing the markup. But it has <a href="http://purescript-pux.org/#Why_is_Pux_slow">performance issues as stated in its web site</a> as of August 2018. Check their <a href="http://purescript-pux.org/#Benchmarks">benchmarks</a>.</p></li></ul><p>Here is an example from the Pux web, of an uncommon <a href="http://purescript-pux.org/docs/routing/">multi-URL example</a> that simulates routing. Instead of fetching URL's by HTTP, it decodes them to an Event type with a Route, which changes the State's <i>currentRoute</i> in the controller and renders it in the View, pushing the target URL into the navigator's history stack, and also turns history pops (Back button presses) in Events in an Elm's subscription like manner. I have reordered the snippets and indented some parts, to highlight the MVC constituents:</p><pre><code class="haskell">{-| MVC highlights of the Pux multi-page (multi-URL) sample app.
    * Here the Language is PureScript !!! 
    * Square bracket literals denote type Array -}

-- the model
data Route = Home | Users String | User Int | NotFound  -- the pages
type State = {currentRoute :: Route}

-- the message
data Event = PageView Route | Navigate String {- the URL -} DOMEvent

-- the view
view :: State -&gt; Html Event
view state = div do
                navigation
                page state.currentRoute
    where
        -- content
        page :: Route -&gt; Html Event
        page Home           = h1 $ text &quot;Home&quot;
        page (Users sortBy) = h1 $ text (&quot;Users sorted by:&quot; &lt;&gt; sortBy)
        page (User id)      = h1 $ text (&quot;User: &quot; &lt;&gt; show id)
        page NotFound       = h1 $ text &quot;Not Found&quot;

        navigation :: Html Event
        navigation =
          nav do
            ul
              li $ a ! href &quot;/&quot; #! onClick (Navigate &quot;/&quot;) $ text &quot;Home&quot;
              li $ a ! href &quot;/users&quot; #! onClick (Navigate &quot;/users&quot;) $ text &quot;Users&quot;
              li $ a ! href &quot;/users?sortBy=age&quot; #! onClick (Navigate &quot;/users?sortBy=age&quot;) $ text &quot;Users sorted by age.&quot;
              li $ a ! href &quot;/users/123&quot; #! onClick (Navigate &quot;/users/123&quot;) $ text &quot;User 123&quot;
              li $ a ! href &quot;/foobar&quot; #! onClick (Navigate &quot;/foobar&quot;) $ text &quot;Not found&quot;
              
-- the URL to (PageView Route) decoder
match :: String -&gt; Event
match url = PageView $ fromMaybe NotFound $ router url $
  Home &lt;$ end
  &lt;|&gt;
  Users &lt;$&gt; (lit &quot;users&quot; *&gt; param &quot;sortBy&quot;) &lt;* end
  &lt;|&gt;
  Users &quot;name&quot; &lt;$ (lit &quot;users&quot;) &lt;* end
  &lt;|&gt;
  User &lt;$&gt; (lit &quot;users&quot; *&gt; int) &lt;* end    

-- the controller
foldp :: â fx. Event -&gt; State -&gt; EffModel State Event (history :: HISTORY, 
                                                       dom :: DOM | fx)
foldp (PageView route) st =  noEffects $ st { currentRoute = route }
foldp (Navigate url ev) st =
  onlyEffects st [ liftEff do
                     preventDefault ev
                     
                     -- push url and title into the Navigator history
                     h &lt;- history =&lt;&lt; window
                     pushState (toForeign {}) (DocumentTitle &quot;&quot;) (URL url) h
                     
                     -- emit a PageView message 
                     -- `match` decodes the URL into a (PageView Route) Event message
                     pure $ Just $ match url
                 ]

main = do
  -- sampleURL emits a Signal on navigator history pops (as a result of the Back button)
  urlSignal &lt;- sampleURL =&lt;&lt; window
  let routeSignal = urlSignal ~&gt; match  -- Signal to PageView Event &quot;natural transf.&quot;
  app &lt;- start
    { initialState: { currentRoute: Home }
    , view
    , foldp
    , inputs: [routeSignal]
    }</code></pre><p>In simpler apps the <a href="http://purescript-pux.org/docs/rendering/">rendering setup</a> would tell whether to render</p><ul><li>to a browser DOM Element, with <i>renderToDOM</i></li><li>to console output, with <i>renderToString</i></li></ul><h2 id="purescript-thermite"><a href="#purescript-thermite">PureScript Thermite</a></h2><ul><li><p><a href="https://github.com/paf31/purescript-thermite/">Thermite</a> is a Purescript-react framework that offers some component combination possibilities, each with its model state, event messages and controller.</p><ol><li><p>you may combine several components of equal model and message types into an app, with the component <i>Semigroup</i> operator <code>(&lt;&gt;)</code>.</p><ul><li><p>to combine components with different models, there are combinators that let you focus with a <a href="https://www.schoolofhaskell.com/user/griba/easier_lenses_profunctor_based_with_mezzolens">lens</a>,  the specific model type from the group model product type, or a prism in case of optional components.</p></li><li><p>to combine components with different messages (called <i>actions</i>), there are combinators that let you focus with a prism the specific message type from the group message sum type, but sharing the same message type enables mutual interaction.</p></li></ul><p> Combining independent components:</p><pre><code> spec1 :: Spec _ S1 _ A1
 spec2 :: Spec _ S2 _ A2
 --
 groupSpec :: Spec _ (Tuple S1 S2)  -- group model
                   _ (Either A1 A2) -- group action
                   
                   
 groupSpec = focus _1    -- apply lens _1 to the group model
                   _Left -- apply lens _Left to the group action
                   spec1 -- component to focus
                   
             &lt;&gt; focus _2 _Right spec2</code></pre> </li><li><p>you may also build a group of equally typed components as a List, where the state is a List of the states, and the message (called <i>action</i>) is indexed with the index of the originating subcomponent in the List.</p></li></ol></li></ul><h2 id="purescript-halogen"><a href="#purescript-halogen">PureScript Halogen</a></h2><ul><li><p><a href="https://github.com/slamdata/purescript-halogen/">Halogen</a> is a somewhat more complex Purescript framework.</p><ul><li><p>A component may include <a href="https://pursuit.purescript.org/packages/purescript-halogen/3.1.3/docs/Halogen.HTML#v:slot"><i>slots</i></a> for subcomponents in the HTML DSL, enabling bidirectional parent-child communication reflected in its generator parameters:</p><ul><li><p>A value of type <i>Slot</i> (the <a href="https://github.com/slamdata/purescript-halogen/blob/v4.0.0/docs/5%20-%20Parent%20and%20child%20components.md#user-content-slot-address"><i>slot address</i></a>) is used as slot identifier and makes possible to send synchronous <a href="https://github.com/slamdata/purescript-halogen/blob/v4.0.0/docs/2%20-%20Defining%20a%20component.md#query-algebra"><i>request</i></a> <a href="https://pursuit.purescript.org/packages/purescript-halogen/2.0.1/docs/Halogen.Query#v:query"><i>queries</i></a> from within the controller, to the slot subcomponent.</p></li><li><p>Slot &quot;input&quot; values (at the slot's input parameter) are a means of passing values into a child component every time a parent re-renders, to be handled through the subcomponent <a href="https://pursuit.purescript.org/packages/purescript-halogen/3.1.3/docs/Halogen.Component#t:ComponentSpec"><i>receiver</i> field</a> &quot;input&quot; handler where you may tag the incoming message to be processed by the subcomponent controller</p></li><li><p>The slot &quot;output&quot; handler parameter: a subcomponent may <a href="https://pursuit.purescript.org/packages/purescript-halogen/3.1.3/docs/Halogen.Query.HalogenM#v:raise"><i>raise</i></a> messages to its parent container component to be handled through the slot's &quot;output&quot; handler where you may tag the incoming message to be processed by the component controller</p></li></ul></li><li><p>The component state, instead of given as parameter to the <i>eval</i> controller, it is held in the controller's MonadState monad.</p></li><li><p>There is a weird thing in the way messages, called <a href="https://github.com/slamdata/purescript-halogen/blob/v4.0.0/docs/2%20-%20Defining%20a%20component.md#query-algebra">Queries</a>, are defined, because the system enforces the return value of the <i>eval</i> controller to be determined by the <i>query</i> message content or, in case of <i>request queries</i>, the result of its callback component, which has a strange type of <code>(queryResult -&gt; a)</code> (see <i><a href="https://github.com/slamdata/purescript-halogen/blob/v4.0.0/docs/2%20-%20Defining%20a%20component.md#query-evaluation">Query evaluation</a></i>). This is enforced by defining the controller type as a  <a href="https://pursuit.purescript.org/packages/purescript-prelude/4.0.1/docs/Data.NaturalTransformation">natural transformation</a>: an homomorphism between structures, the query message and the controller monad, threading some obscure value through them.</p></li></ul></li></ul></article>


</div>
</div>
<div class="row article-footer"><div class="span7 meta"><span class="sociallinksunicode social">
<a href="https://twitter.com/home?status=$url$" target="_blank"><i class="icon-twitter"></i></a>&nbsp;
<a href="http://www.facebook.com/sharer/sharer.php?u=$url$" target="_blank"><i class="icon-facebook"></i></a>&nbsp;
<a href="https://plus.google.com/share?url=$url$" target="_blank"><i class="icon-google-plus"></i></a></span>
</div>
</div>
</div>
<div class="footer"><div class="container"><div class="row"><div class="span12"><ul class="menu"><li><a href="https://www.schoolofhaskell.com/">School</a>
</li>
<li><a href="https://www.schoolofhaskell.com/user">Users</a>
</li>

<li><a class="brand" href="https://fpcomplete.com">Sponsored by:
<img src="/static/img/logo.png" title="FPComplete">
</a>
</li>
</ul>
</div>
</div>
<div class="row"><div class="span12"></div>
</div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap-responsive.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script><script src="https://www.schoolofhaskell.com/static/combined/Y-3k9_tW.js"></script><script>$(function(){
  $("a.logout").click(function(){
    var form = $("<form method='post'/>");
    form.attr("action", $(this).attr("href"));
    $("body").append(form);
    form.submit();
    return false;
  });
});

$(function(){
    $('.sociallinksunicode a').each(function(){
        $(this).attr('href',$(this).attr('href').replace('$url$',document.location));
    });
});

$(function(){
  // If we need to select a user/select a password then show the
  // details confirmation form, otherwise enable the getting started
  // section.
  if($('.alert-block a').text().match(/(selected a username|change your password)/)) {
    $("#confirm-details").show();
    $("#confirm-details #inputUsername").focus();
  } else {
    $("#get-started").removeClass('disabled').addClass('enabled');
  }

  // For lack of a plain HTML validation story this will do.
  $('.welcome-page').each(function(){
    $('form').submit(check);
  });
  function check(){
    setTimeout(check,500);
    var error = false;
    $('.error').removeClass('error');
    $('#enter-details input').each(function(){
      if($(this).val() == '') {
        $(this).parent().parent().addClass('error');
        error = true;
      }
    });
    if(error) return false;
    if($('[name=password]').val() == $('[name=confirm]').val()) {
      $('#confirm').removeClass('error');
      return true;
    } else {
      $('#confirm').addClass('error');
      return false;
    }
  }
});

$(function(){
  // When scrolling over a snippet editor, activate the "clone in IDE" popovers
  $('article').each(function(){
    var n = 100;
    var wait = 10000;
    function check(){
      if($('.clone').length == 0) {
        setTimeout(check,n);
        return;
      }
      var activated = $.cookie('clone-popover');
      if (activated) return;
      var activate = false;
      $('.controlsRun:onScreen').each(function(){
        $.cookie('clone-popover', 'true', { expires: 30, path: '/' });
        activate = true;
        return false;
      });
      if(activate) {
          $('.clone').each(function(){
              // The bootstrap API is rather unreasonable to say the
              // least.
              next = $(this).parent();
              var title = next.attr('title');
              next.attr('data-content',$(this).attr('data-content'));
              next.attr('title',$(this).attr('title'));
              next.popover('show',{
                  title: $(this).attr('title')
              });
              next.attr('title',title);
          });
          setTimeout(function(){
              $('.clone').each(function(){
                  $(this).parent().popover('hide');
              });
          },wait);
      } else {
        setTimeout(check,n);
      }
    }
    setTimeout(check,n);
  });
});

// onScreen jQuery plugin v0.2.1
// (c) 2011-2013 Ben Pickles
//
// http://benpickles.github.com/onScreen
//
// Released under MIT license.
(function(a){a.expr[":"].onScreen=function(b){var c=a(window),d=c.scrollTop(),e=c.height(),f=d+e,g=a(b),h=g.offset().top,i=g.height(),j=h+i;return h>=d&&h<f||j>d&&j<=f||i>e&&h<=d&&j>=f}})(jQuery);

/*!
 * jQuery Cookie Plugin v1.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function($, document) {

  var pluses = /\+/g;
  function raw(s) {
    return s;
  }
  function decoded(s) {
    return decodeURIComponent(s.replace(pluses, ' '));
  }

  $.cookie = function(key, value, options) {

    // key and at least value given, set cookie...
    if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value == null)) {
      options = $.extend({}, $.cookie.defaults, options);

      if (value == null) {
	options.expires = -1;
      }

      if (typeof options.expires === 'number') {
	var days = options.expires, t = options.expires = new Date();
	t.setDate(t.getDate() + days);
      }

      value = String(value);

      return (document.cookie = [
	encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),
	options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
	options.path    ? '; path=' + options.path : '',
	options.domain  ? '; domain=' + options.domain : '',
	options.secure  ? '; secure' : ''
      ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || $.cookie.defaults || {};
    var decode = options.raw ? raw : decoded;
    var cookies = document.cookie.split('; ');
    for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {
      if (decode(parts.shift()) === key) {
	return decode(parts.join('='));
      }
    }
    return null;
  };
  $.cookie.defaults = {};})(jQuery, document);
</script><!--[if lt IE 10]><script src="https://www.schoolofhaskell.com/static/design/js/ie.js?etag=ayV2DuJ0"></script><![endif]--><script>if(!window.location.href.match(/localhost/)){var track = '/tutorial/user/griba/purescript-client-side-mvc-frameworks-1';
window._gaq = [['_setAccount','UA-36928035-1'],track != ''? ['_trackPageview',track] : ['_trackPageview']
,['_trackPageLoadTime']];window._gaq.push(['_setCustomVar',1,'Section','School of Haskell',3]);
window._gaq.push(['_setCustomVar',2,'User Type','Visitor',1]);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

})();}</script>
<!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.  chromium.org/developers/how-tos/chrome-frame-getting-started --><!--[if lt IE 7 ]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script><script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script><![endif]--></body></html>